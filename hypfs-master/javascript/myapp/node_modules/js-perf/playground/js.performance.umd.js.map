{"version":3,"file":"js.performance.umd.js","sources":["../src/utilities/constants.js","../src/engine/marker.js","../src/engine/markerGenerator.js","../src/engine/index.js","../src/utilities/index.js","../src/index.js"],"sourcesContent":["export const START = 'START'\nexport const STOP = 'STOP'\n","class Marker {\n  constructor ({ name, duration }) {\n    this.name = name\n    this.duration = duration\n  }\n\n  get info () {\n    return {\n      name: this.name,\n      duratino: this.duration\n    }\n  }\n\n  set info ({ name, duration }) {\n    this.name = name\n    this.duration = duration\n  }\n}\n\nexport default Marker\n","import { START, STOP } from '../utilities/constants'\nimport Marker from './marker'\n\nlet labels = {}\n\nif (process.env.NODE_ENV !== 'production') {\n  // performance =  internalPerformance\n}\n\nexport function internalStart (label) {\n  const startLabel = `${label}-${START}`\n  labels[label] = {\n    start: startLabel\n  }\n  performance.mark(startLabel)\n}\n\nexport function internalEnd (label) {\n  const stopLabel = `${label}-${STOP}`\n  labels[label]['stop'] = stopLabel\n  performance.mark(stopLabel)\n}\n\nexport function giveMeAllMarkers () {\n  for (const label in labels) {\n    const originalLabel = labels[label]\n    const startLabel = originalLabel.start\n    const stopLabel = originalLabel.stop\n    try {\n      performance.measure(label, startLabel, stopLabel)\n    } catch (e) {\n      throw new Error('JS Performance is trying access to marker that does not exist')\n    }\n  }\n  const measures = performance.getEntriesByType('measure')\n\n  const markers = []\n  for (let measure of measures) {\n    markers.push(new Marker({\n      name: measure.name,\n      duration: measure.duration\n    }))\n  }\n  return markers\n}\n\nexport function clearMarkers () {\n  labels = {}\n  performance.clearMarks()\n  performance.clearMeasures()\n}\n","import { internalStart, internalEnd, giveMeAllMarkers, clearMarkers } from './markerGenerator'\n\nexport let start = () => {}\nexport let stop = () => {}\n\nexport function recordingStart () {\n  clearMarkers()\n  start = internalStart\n  stop = internalEnd\n}\n\nexport function recordingStop () {\n  start = () => {}\n  stop = () => {}\n}\n\nexport function getMeasures () {\n  const markers = giveMeAllMarkers()\n  const table = markers.map(marker => ({ 'Operation name': marker.name, 'Duration (ms)': marker.duration }))\n  console.table(table)\n}\n\nexport function getMeasure (label) {\n  performance.getEntriesByName('', 'mark')\n}\n","import { log } from './logger'\n\nexport function allowed () {\n  return typeof window !== 'undefined'\n}\n\nexport function precise () {\n  return typeof window.performance !== 'undefined'\n}\n\n/**\n * It checks if the browser supports marks\n * @return {String} Simple string with information about supporting\n */\nexport function support () {\n  let result = ''\n  if (allowed()) {\n    if (precise()) {\n      result = 'Your browser support the User Timing API. The measures will be precise!'\n    } else {\n      result = 'Your browser does not support the User Timing API. The measures will not be precise'\n    }\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    return result\n  } else {\n    log(result)\n  }\n}\n","import { recordingStart, recordingStop, getMeasures, start, stop } from './engine'\nimport { support } from './utilities'\n\n/**\n * It starts the trace the marks\n */\nexport function startRecording () {\n  recordingStart()\n}\n\n/**\n * It stops tracing the marks\n */\nexport function stopRecording () {\n  recordingStop()\n}\n\n/**\n * It prints in a table all the measures\n */\nexport function allMeasures () {\n  getMeasures()\n}\n\n/**\n * It creates a marker\n * @param  {String} labelToMarkWith The name of the marker\n * @return {String}                 Dev only, in return the marked label\n */\nexport function startMark (labelToMarkWith) {\n  start(labelToMarkWith)\n  if (process.env.NODE_ENV !== 'production') {\n    return labelToMarkWith\n  }\n}\n\n/**\n * It creates a marker the ending operation\n * @param  {String} labelToMarkWith The name of the marker\n * @return {String}                 Dev only, in return the marked label\n */\nexport function endMark (labelToMarkWith) {\n  stop(labelToMarkWith)\n  if (process.env.NODE_ENV !== 'production') {\n    return labelToMarkWith\n  }\n}\n\n/**\n * Gives information is it is possible to use the library\n * @return {[type]} [description]\n */\nexport function checkSupport () {\n  support()\n}\n"],"names":["START","STOP","Marker","name","duration","labels","process","internalStart","label","startLabel","mark","internalEnd","stopLabel","giveMeAllMarkers","originalLabel","start","stop","measure","e","Error","measures","performance","getEntriesByType","markers","push","clearMarkers","clearMarks","clearMeasures","recordingStart","recordingStop","getMeasures","table","map","marker","allowed","window","precise","support","result","startRecording","stopRecording","allMeasures","startMark","labelToMarkWith","endMark","checkSupport"],"mappings":"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"}